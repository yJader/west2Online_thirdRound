# 西二第三轮-天气查询

## 思路
1. 控制台 输入城市 开始查询
   - 每次在查询前初始化北京 上海 福州的天气
2. 在city表中查询是否存在需要查询城市的信息
   - 若无, 通过api查询并存入
3. 通过city表中获得的location_id 在weather表中查询
   - 若不存在weather信息或weather信息过期 通过api查询并更新
- ~~看错题目 多保存了一些城市信息 懒得删了~~   

## 数据库设计
1. city表 : 存储城市信息
   - location_id : 主键
2. weather表 : 存储天气信息
   - location_id & day_of_data : 联合主键

## mybatis部分
- 使用逆向工程生成实体类, mapper接口, 映射文件


## bug记录
1. 重复插入
   - GeoAPI查询到的行政区域名称末尾带"省/市"
   - 查询时输入的adm若未加上"省/市" 则会判定为非重复数据 再次进行api查询和插入
   - 可以在api查询后再次在数据库中查询来避免这个错误 